# Get Pull Request Comments

## Route

```
api/github/getPullRequestComments
```

## Method

POST

## Params

```
{
    "user": "string",
    "repo": "string",
    "owner": "string",
    "pull_number": "string"
}
```

Where:

- user: email of the user to search (registry on app). Not necessarily GitHub email.
- repo: name of the repo to search.
- owner: owner of the repo to search.
- pull_number: number of the pull request to search.

## Response

### Errors

If the user does not exist, there will be no access token

```
{
    "error": "no access_token"
}
```

If nothing comes in the `user` param

```
{
    "error": "no user"
}
```

If nothing comes in the `repo` param

```
{
    "error": "no repo"
}
```

If nothing comes in the `owner` param

```
{
    "error": "no owner"
}
```

If nothing comes in the `pull_number` param

```
{
    "error": "no pull_number"
}
```

### Success

```
[
    {
        "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000103699",
        "pull_request_review_id": 1148498547,
        "id": 1000103699,
        "node_id": "PRRC_kwDOEzNtoc47nF8T",
        "diff_hunk": "@@ -0,0 +1,75 @@\n+import { useState, useEffect } from \"react\";\n+import { useRouter } from \"next/router\";\n+\n+function Paymentsuccess() {\n+  const router = useRouter();\n+\n+  const [numberOfSeats, setNumberOfSeats] = useState(4);\n+\n+  let localEmailArray = [];\n+\n+  useEffect(() => {\n+    const { seats } = router.query as { seats: string };\n+    const parsedSeats = parseInt(seats);\n+    setNumberOfSeats(parsedSeats);\n+  }, [router.query]);\n+\n+  const handleSubmit = (e) => {\n+    e.preventDefault();\n+    console.log(\"localEmailArray\", localEmailArray);\n+    // send local email array to DB here\n+    router.push(\"/billing/teammatesInvited\");\n+  };\n+\n+  return (\n+    <div\n+      style={{\n+        display: \"grid\",\n+        gridTemplateColumns: \"repeat(auto-fit, minmax(350px, 1fr))\",\n+      }}\n+    >\n+      <div className=\"d-flex flex-items-center flex-justify-center flex-column\">\n+        <div\n+          className=\"Box d-flex flex-items-center flex-justify-center flex-column p-4 p-6 m-6\"\n+          style={{ maxWidth: \"80ch\" }}\n+        >\n+          <h1 className=\"h3 mb-3 f4 text-normal\">\n+            Add your team members to Watermelon by typing their email addresses\n+          </h1>\n+          {/* Add a for loop of length equal to seats*/}\n+          {/* Add input field for each iteratrion */}\n+          {/* Style using primer system */}\n+          <form onSubmit={(e) => handleSubmit(e)}>\n+            {Array.from(Array(numberOfSeats || 0).keys()).map((seatIndex) => (\n+              <div className=\"p-3\" key={seatIndex}>\n+                {/* on change, add email to email */}\n+                <input\n+                  required\n+                  id={`email${seatIndex}`}\n+                  pattern=\"(?!^[.+&'_-]*@.*$)(^[_\\w\\d+&'-]+(\\.[_\\w\\d+&'-]*)*@[\\w\\d-]+(\\.[\\w\\d-]+)*\\.(([\\d]{1,3})|([\\w]{2,}))$)\"",
        "path": "pages/billing/paymentSuccess.tsx",
        "position": null,
        "original_position": 49,
        "commit_id": "38fdb8f43e3f7a754ccdf623de6ecf9cf67d526b",
        "original_commit_id": "3af50083873e7714eaff62d7d897fbe80de513ed",
        "user": {
            "login": "EstebanDalelR",
            "id": 11527621,
            "node_id": "MDQ6VXNlcjExNTI3NjIx",
            "avatar_url": "https://avatars.githubusercontent.com/u/11527621?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/EstebanDalelR",
            "html_url": "https://github.com/EstebanDalelR",
            "followers_url": "https://api.github.com/users/EstebanDalelR/followers",
            "following_url": "https://api.github.com/users/EstebanDalelR/following{/other_user}",
            "gists_url": "https://api.github.com/users/EstebanDalelR/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/EstebanDalelR/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/EstebanDalelR/subscriptions",
            "organizations_url": "https://api.github.com/users/EstebanDalelR/orgs",
            "repos_url": "https://api.github.com/users/EstebanDalelR/repos",
            "events_url": "https://api.github.com/users/EstebanDalelR/events{/privacy}",
            "received_events_url": "https://api.github.com/users/EstebanDalelR/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "This looks very complicated, why not fall to email input validation only?",
        "created_at": "2022-10-20T03:16:52Z",
        "updated_at": "2022-10-20T03:18:01Z",
        "html_url": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000103699",
        "pull_request_url": "https://api.github.com/repos/watermelontools/watermelon/pulls/98",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000103699"
            },
            "html": {
                "href": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000103699"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/98"
            }
        },
        "reactions": {
            "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000103699/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 49,
        "side": "RIGHT"
    },
    {
        "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104098",
        "pull_request_review_id": 1148498547,
        "id": 1000104098,
        "node_id": "PRRC_kwDOEzNtoc47nGCi",
        "diff_hunk": "@@ -0,0 +1,75 @@\n+import { useState, useEffect } from \"react\";\n+import { useRouter } from \"next/router\";\n+\n+function Paymentsuccess() {\n+  const router = useRouter();\n+\n+  const [numberOfSeats, setNumberOfSeats] = useState(4);\n+\n+  let localEmailArray = [];\n+\n+  useEffect(() => {\n+    const { seats } = router.query as { seats: string };\n+    const parsedSeats = parseInt(seats);\n+    setNumberOfSeats(parsedSeats);\n+  }, [router.query]);\n+\n+  const handleSubmit = (e) => {\n+    e.preventDefault();\n+    console.log(\"localEmailArray\", localEmailArray);\n+    // send local email array to DB here",
        "path": "pages/billing/paymentSuccess.tsx",
        "position": 20,
        "original_position": 20,
        "commit_id": "38fdb8f43e3f7a754ccdf623de6ecf9cf67d526b",
        "original_commit_id": "3af50083873e7714eaff62d7d897fbe80de513ed",
        "user": {
            "login": "EstebanDalelR",
            "id": 11527621,
            "node_id": "MDQ6VXNlcjExNTI3NjIx",
            "avatar_url": "https://avatars.githubusercontent.com/u/11527621?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/EstebanDalelR",
            "html_url": "https://github.com/EstebanDalelR",
            "followers_url": "https://api.github.com/users/EstebanDalelR/followers",
            "following_url": "https://api.github.com/users/EstebanDalelR/following{/other_user}",
            "gists_url": "https://api.github.com/users/EstebanDalelR/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/EstebanDalelR/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/EstebanDalelR/subscriptions",
            "organizations_url": "https://api.github.com/users/EstebanDalelR/orgs",
            "repos_url": "https://api.github.com/users/EstebanDalelR/repos",
            "events_url": "https://api.github.com/users/EstebanDalelR/events{/privacy}",
            "received_events_url": "https://api.github.com/users/EstebanDalelR/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Will this be implemented or is it orphaned?",
        "created_at": "2022-10-20T03:17:58Z",
        "updated_at": "2022-10-20T03:18:01Z",
        "html_url": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000104098",
        "pull_request_url": "https://api.github.com/repos/watermelontools/watermelon/pulls/98",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104098"
            },
            "html": {
                "href": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000104098"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/98"
            }
        },
        "reactions": {
            "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104098/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 20,
        "original_line": 20,
        "side": "RIGHT"
    },
    {
        "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104993",
        "pull_request_review_id": 1148500214,
        "id": 1000104993,
        "node_id": "PRRC_kwDOEzNtoc47nGQh",
        "diff_hunk": "@@ -0,0 +1,75 @@\n+import { useState, useEffect } from \"react\";\n+import { useRouter } from \"next/router\";\n+\n+function Paymentsuccess() {\n+  const router = useRouter();\n+\n+  const [numberOfSeats, setNumberOfSeats] = useState(4);\n+\n+  let localEmailArray = [];\n+\n+  useEffect(() => {\n+    const { seats } = router.query as { seats: string };\n+    const parsedSeats = parseInt(seats);\n+    setNumberOfSeats(parsedSeats);\n+  }, [router.query]);\n+\n+  const handleSubmit = (e) => {\n+    e.preventDefault();\n+    console.log(\"localEmailArray\", localEmailArray);\n+    // send local email array to DB here\n+    router.push(\"/billing/teammatesInvited\");\n+  };\n+\n+  return (\n+    <div\n+      style={{\n+        display: \"grid\",\n+        gridTemplateColumns: \"repeat(auto-fit, minmax(350px, 1fr))\",\n+      }}\n+    >\n+      <div className=\"d-flex flex-items-center flex-justify-center flex-column\">\n+        <div\n+          className=\"Box d-flex flex-items-center flex-justify-center flex-column p-4 p-6 m-6\"\n+          style={{ maxWidth: \"80ch\" }}\n+        >\n+          <h1 className=\"h3 mb-3 f4 text-normal\">\n+            Add your team members to Watermelon by typing their email addresses\n+          </h1>\n+          {/* Add a for loop of length equal to seats*/}\n+          {/* Add input field for each iteratrion */}\n+          {/* Style using primer system */}\n+          <form onSubmit={(e) => handleSubmit(e)}>\n+            {Array.from(Array(numberOfSeats || 0).keys()).map((seatIndex) => (\n+              <div className=\"p-3\" key={seatIndex}>\n+                {/* on change, add email to email */}\n+                <input\n+                  required\n+                  id={`email${seatIndex}`}\n+                  pattern=\"(?!^[.+&'_-]*@.*$)(^[_\\w\\d+&'-]+(\\.[_\\w\\d+&'-]*)*@[\\w\\d-]+(\\.[\\w\\d-]+)*\\.(([\\d]{1,3})|([\\w]{2,}))$)\"",
        "path": "pages/billing/paymentSuccess.tsx",
        "position": null,
        "original_position": 49,
        "commit_id": "38fdb8f43e3f7a754ccdf623de6ecf9cf67d526b",
        "original_commit_id": "3af50083873e7714eaff62d7d897fbe80de513ed",
        "user": {
            "login": "EstebanDalelR",
            "id": 11527621,
            "node_id": "MDQ6VXNlcjExNTI3NjIx",
            "avatar_url": "https://avatars.githubusercontent.com/u/11527621?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/EstebanDalelR",
            "html_url": "https://github.com/EstebanDalelR",
            "followers_url": "https://api.github.com/users/EstebanDalelR/followers",
            "following_url": "https://api.github.com/users/EstebanDalelR/following{/other_user}",
            "gists_url": "https://api.github.com/users/EstebanDalelR/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/EstebanDalelR/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/EstebanDalelR/subscriptions",
            "organizations_url": "https://api.github.com/users/EstebanDalelR/orgs",
            "repos_url": "https://api.github.com/users/EstebanDalelR/repos",
            "events_url": "https://api.github.com/users/EstebanDalelR/events{/privacy}",
            "received_events_url": "https://api.github.com/users/EstebanDalelR/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "I mean, let the browser validate it's an email.",
        "created_at": "2022-10-20T03:20:00Z",
        "updated_at": "2022-10-20T03:20:01Z",
        "html_url": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000104993",
        "pull_request_url": "https://api.github.com/repos/watermelontools/watermelon/pulls/98",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104993"
            },
            "html": {
                "href": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000104993"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/98"
            }
        },
        "reactions": {
            "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000104993/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 49,
        "side": "RIGHT",
        "in_reply_to_id": 1000103699
    },
    {
        "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000351662",
        "pull_request_review_id": 1148845665,
        "id": 1000351662,
        "node_id": "PRRC_kwDOEzNtoc47oCeu",
        "diff_hunk": "@@ -0,0 +1,75 @@\n+import { useState, useEffect } from \"react\";\n+import { useRouter } from \"next/router\";\n+\n+function Paymentsuccess() {\n+  const router = useRouter();\n+\n+  const [numberOfSeats, setNumberOfSeats] = useState(4);\n+\n+  let localEmailArray = [];\n+\n+  useEffect(() => {\n+    const { seats } = router.query as { seats: string };\n+    const parsedSeats = parseInt(seats);\n+    setNumberOfSeats(parsedSeats);\n+  }, [router.query]);\n+\n+  const handleSubmit = (e) => {\n+    e.preventDefault();\n+    console.log(\"localEmailArray\", localEmailArray);\n+    // send local email array to DB here",
        "path": "pages/billing/paymentSuccess.tsx",
        "position": 20,
        "original_position": 20,
        "commit_id": "38fdb8f43e3f7a754ccdf623de6ecf9cf67d526b",
        "original_commit_id": "3af50083873e7714eaff62d7d897fbe80de513ed",
        "user": {
            "login": "baristaGeek",
            "id": 8325094,
            "node_id": "MDQ6VXNlcjgzMjUwOTQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8325094?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baristaGeek",
            "html_url": "https://github.com/baristaGeek",
            "followers_url": "https://api.github.com/users/baristaGeek/followers",
            "following_url": "https://api.github.com/users/baristaGeek/following{/other_user}",
            "gists_url": "https://api.github.com/users/baristaGeek/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baristaGeek/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baristaGeek/subscriptions",
            "organizations_url": "https://api.github.com/users/baristaGeek/orgs",
            "repos_url": "https://api.github.com/users/baristaGeek/repos",
            "events_url": "https://api.github.com/users/baristaGeek/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baristaGeek/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Making those email addresses part of our DB is the next task, which is represented by ticket WM-51",
        "created_at": "2022-10-20T09:01:13Z",
        "updated_at": "2022-10-20T09:01:14Z",
        "html_url": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000351662",
        "pull_request_url": "https://api.github.com/repos/watermelontools/watermelon/pulls/98",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000351662"
            },
            "html": {
                "href": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000351662"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/98"
            }
        },
        "reactions": {
            "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000351662/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": 20,
        "original_line": 20,
        "side": "RIGHT",
        "in_reply_to_id": 1000104098
    },
    {
        "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000354419",
        "pull_request_review_id": 1148850498,
        "id": 1000354419,
        "node_id": "PRRC_kwDOEzNtoc47oDJz",
        "diff_hunk": "@@ -0,0 +1,75 @@\n+import { useState, useEffect } from \"react\";\n+import { useRouter } from \"next/router\";\n+\n+function Paymentsuccess() {\n+  const router = useRouter();\n+\n+  const [numberOfSeats, setNumberOfSeats] = useState(4);\n+\n+  let localEmailArray = [];\n+\n+  useEffect(() => {\n+    const { seats } = router.query as { seats: string };\n+    const parsedSeats = parseInt(seats);\n+    setNumberOfSeats(parsedSeats);\n+  }, [router.query]);\n+\n+  const handleSubmit = (e) => {\n+    e.preventDefault();\n+    console.log(\"localEmailArray\", localEmailArray);\n+    // send local email array to DB here\n+    router.push(\"/billing/teammatesInvited\");\n+  };\n+\n+  return (\n+    <div\n+      style={{\n+        display: \"grid\",\n+        gridTemplateColumns: \"repeat(auto-fit, minmax(350px, 1fr))\",\n+      }}\n+    >\n+      <div className=\"d-flex flex-items-center flex-justify-center flex-column\">\n+        <div\n+          className=\"Box d-flex flex-items-center flex-justify-center flex-column p-4 p-6 m-6\"\n+          style={{ maxWidth: \"80ch\" }}\n+        >\n+          <h1 className=\"h3 mb-3 f4 text-normal\">\n+            Add your team members to Watermelon by typing their email addresses\n+          </h1>\n+          {/* Add a for loop of length equal to seats*/}\n+          {/* Add input field for each iteratrion */}\n+          {/* Style using primer system */}\n+          <form onSubmit={(e) => handleSubmit(e)}>\n+            {Array.from(Array(numberOfSeats || 0).keys()).map((seatIndex) => (\n+              <div className=\"p-3\" key={seatIndex}>\n+                {/* on change, add email to email */}\n+                <input\n+                  required\n+                  id={`email${seatIndex}`}\n+                  pattern=\"(?!^[.+&'_-]*@.*$)(^[_\\w\\d+&'-]+(\\.[_\\w\\d+&'-]*)*@[\\w\\d-]+(\\.[\\w\\d-]+)*\\.(([\\d]{1,3})|([\\w]{2,}))$)\"",
        "path": "pages/billing/paymentSuccess.tsx",
        "position": null,
        "original_position": 49,
        "commit_id": "38fdb8f43e3f7a754ccdf623de6ecf9cf67d526b",
        "original_commit_id": "3af50083873e7714eaff62d7d897fbe80de513ed",
        "user": {
            "login": "baristaGeek",
            "id": 8325094,
            "node_id": "MDQ6VXNlcjgzMjUwOTQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8325094?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/baristaGeek",
            "html_url": "https://github.com/baristaGeek",
            "followers_url": "https://api.github.com/users/baristaGeek/followers",
            "following_url": "https://api.github.com/users/baristaGeek/following{/other_user}",
            "gists_url": "https://api.github.com/users/baristaGeek/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/baristaGeek/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/baristaGeek/subscriptions",
            "organizations_url": "https://api.github.com/users/baristaGeek/orgs",
            "repos_url": "https://api.github.com/users/baristaGeek/repos",
            "events_url": "https://api.github.com/users/baristaGeek/events{/privacy}",
            "received_events_url": "https://api.github.com/users/baristaGeek/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "You're totally right",
        "created_at": "2022-10-20T09:03:37Z",
        "updated_at": "2022-10-20T09:03:38Z",
        "html_url": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000354419",
        "pull_request_url": "https://api.github.com/repos/watermelontools/watermelon/pulls/98",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000354419"
            },
            "html": {
                "href": "https://github.com/watermelontools/watermelon/pull/98#discussion_r1000354419"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/watermelontools/watermelon/pulls/98"
            }
        },
        "reactions": {
            "url": "https://api.github.com/repos/watermelontools/watermelon/pulls/comments/1000354419/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "start_line": null,
        "original_start_line": null,
        "start_side": null,
        "line": null,
        "original_line": 49,
        "side": "RIGHT",
        "in_reply_to_id": 1000103699
    }
]
```
