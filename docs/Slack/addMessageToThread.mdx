# Post Message to Channel

Note: this will prepend a "üçâ" to the text.

## Route

```
api/slack/addMessageToThread
```

## Method

POST

## Params

```
{
    "user": "string",
    "channelId": "string"
    "text": "string",
    "threadTS": "string",
    "broadcast"?: "string",
}
```

Where:

- user: email of the user to search (registry on app). Not necessarily Slack email.
- channelId: the channel id.
- text: text of the comment to add.
- threadTs: timestamp provided by Slack of the parent
- broadcast?: if true, send it also to the channel (like checking the box on the UI)

## Response

### Errors

If the user does not exist, there will be no user token

```
{
    "error": "no user_token"
}
```

If nothing comes in the `user` param

```
{
    "error": "no user"
}
```

If nothing comes in the `channelId` param

```
{
    "error": "no channelId"
}
```

If nothing comes in the `text` param

```
{
    "error": "no text"
}
```

If nothing comes in the `threadTS` param

```
{
    "error": "no threadTS"
}
```

### Success

```
{
    "ok": true,
    "channel": "C027L8BD2EQ",
    "ts": "1668109461.993479",
    "message": {
        "bot_id": "B0497EAQRML",
        "type": "message",
        "text": "postman",
        "user": "U026ZAJH3B9",
        "ts": "1668109461.993479",
        "app_id": "A03F6LB9DTM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "crr+J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "postman"
                            }
                        ]
                    }
                ]
            }
        ],
        "team": "T027L8BCRNG",
        "bot_profile": {
            "id": "B0497EAQRML",
            "app_id": "A03F6LB9DTM",
            "name": "Churn bot",
            "icons": {
                "image_36": "https://a.slack-edge.com/80588/img/plugins/app/bot_36.png",
                "image_48": "https://a.slack-edge.com/80588/img/plugins/app/bot_48.png",
                "image_72": "https://a.slack-edge.com/80588/img/plugins/app/service_72.png"
            },
            "deleted": false,
            "updated": 1667502051,
            "team_id": "T027L8BCRNG"
        }
    }
}
```
